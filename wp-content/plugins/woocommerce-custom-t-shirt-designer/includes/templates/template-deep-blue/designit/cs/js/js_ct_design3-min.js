
var aPos=new Array("undefined-position","topchestleft","chestcentre","topchestright");function jsGetPos(c){var a=0,b=0;a=c.offsetWidth;b=c.offsetHeight;for(var e=0,d=0;c!=null;e+=c.offsetLeft,d+=c.offsetTop,c=c.offsetParent){}return{x:e,y:d,w:a,h:b}}function jsURLFormat(a){reNewLines=/[\n\r]/g;a=a.replace(reNewLines,"|");a=escape(a);a=a.replace(/[@]/g,"%40");a=a.replace(/[*]/g,"%2A");a=a.replace(/[/]/g,"%2F");a=a.replace(/[+]/g,"%2B");a=a.replace(/[.]/g,"%2E");a=a.replace(/[-]/g,"%2D");return a}var img1=new Image();var img2=new Image();var img3=new Image();var usePNG=1;if($.browser.msie&&$.browser.version=="6.0"){usePNG=0}function jsSetColour(a){document.frmDesign.front_text_colour.value=a;document.frmDesign.front_logo_colour.value=a;jsUpdate()}function jsPreSubmit(){var a=document.frmDesign.front_text_faux.value;strFormatted=jsURLFormat(a);document.frmDesign.front_text.value=strFormatted;document.frmDesign.submit()}function jsUpdate(){sF=jsURLFormat(document.frmDesign.front_text_faux.value);ft=document.frmDesign.front_text_font.value;ts=fetch_unix_timestamp();if(gID("add_names").checked==true){strTextColour=document.frmDesign.front_text_colour.value;img1.src="png_text.php?str="+sF+"&col="+strTextColour+"&bg="+usrBGColour+"&ft="+ft+"&tb=1&png="+usePNG+"&ts="+ts;img2.src="png_text.php?str="+sF+"&col="+strTextColour+"&bg="+usrBGColour+"&ft="+ft+"&h=350&tb=1&thumbw="+aPosOff[2][0]+"&thumb="+usePNG+"&png="+usePNG+"&ts="+ts;gID("frontpreview").src=img1.src;gID("frontpreviewb").src=img2.src;fixIE("frontpreviewb",img2)}else{if(gID("add_logo").checked==true){strLogoColour=document.frmDesign.front_logo_colour.value;img1.src=usrCustomLogoImage+"&cs="+strLogoColour+"&tb=true&ceh="+usrBGColour+"&ts="+ts;img2.src=usrCustomLogoImage+"&cs="+strLogoColour+"&tb=true&ceh="+usrBGColour+"&ts="+ts;fadeControls(false);gID("frontpreview").src=img1.src;gID("frontpreviewb").src=img2.src;fixIE("frontpreviewb",img2);img1.onload=function(){var a=img1.height;if(a<300){a=300}$("#prevImageBg").css("height",a);resetUpload()}}else{if(gID("add_logo").checked==false&&gID("add_names").checked==false&&gID("add_nos_front").checked==true){strTextColour=document.frmDesign.front_text_colour.value;img2.src="png_text3f5b.html?str=&amp;col="+strTextColour+"&bg="+usrBGColour+"&ft="+ft+"&j="+ij+"&ls="+is+"&h=350&tb=1&thumbw="+aPosOff[2][0]+"&thumb="+usePNG+"&png="+usePNG+"&ts="+ts;gID("frontpreviewb").src=img2.src}else{if(bFL){}}}}if(bFL){}}function jsToggleControls(e){if(e!=""){if(e.id=="add_names"){gID("add_logo").checked=false;fadeControls(true)}if(e.id=="add_logo"){gID("add_names").checked=false;fadeControls(false)}}jsUpdate();ajaxUpdateDesignElement(gID("add_names"),"add_front_text");ajaxUpdateDesignElement(gID("add_logo"),"add_front_logo");ajaxUpdateDesignElement(gID("add_nos_front"),"add_numbers_front");var d=(gID("add_logo").checked==false)?true:false;var a=(gID("add_names").checked==false)?true:false;var f=(gID("add_nos_front").checked==false)?true:false;if(d&&a){$("#controlHolder").fadeTo(100,0.4);$("#posHolder").fadeTo(100,0.4);$("#dFrontpreview").fadeTo(100,0.4);$("#dShirtpreview").fadeTo(100,0);gID("controlDisable").style.display="block";gID("posDisable").style.display="block";if(!bFL){jsFNTogglePos(-1)}}else{$("#controlHolder").fadeTo(200,1);$("#posHolder").fadeTo(200,1);$("#dFrontpreview").fadeTo(200,1);$("#dShirtpreview").fadeTo(200,1);gID("controlDisable").style.display="none";gID("posDisable").style.display="none";if(!bFL){jsFNTogglePos(iFPPos)}}if(f){$("#dShirtpreviewNos").fadeTo(100,0)}else{$("#dShirtpreviewNos").fadeTo(200,1)}}function fadeControls(a){if(a){$("#controlImage").fadeOut(100,function(){$("#controlText").fadeIn(200)})}else{$("#controlText").fadeOut(100,function(){$("#controlImage").fadeIn(200)})}}function fixIE(b,a){if($.browser.msie&&parseInt($.browser.version,10)>6&&parseInt($.browser.version,10)<9){gID(b).runtimeStyle.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+a.src+"',sizingMethod='scale')"}}function jsTogglePos(a,padding){jQuery('#imagepos').val(a);iFPPos=a;document.frmDesign.front_position.value=aPos[a];$("#frontpreviewb").animate({width:aPosOff[a][0]+"px"},50,function(){$("#dShirtpreview").animate({paddingTop:parseInt(padding)+parseInt(aPosOff[a][1])+"px",paddingLeft:aPosOff[a][2]+"px",paddingRight:aPosOff[a][3]+"px"},50,function(){jsFNTogglePos(a)})});for(i=1;i<4;i++){if(i==a){$("#spos"+i).fadeTo(0,1)}else{$("#spos"+i).fadeTo(200,0.4)}}}function jsFNTogglePos(a){if(a==1){$("#dShirtpreviewNos").animate({paddingLeft:aPosOff[3][2]+"px"},50);$("#dShirtpreviewNos").animate({paddingRight:aPosOff[3][3]+"px"},50)}else{$("#dShirtpreviewNos").animate({paddingLeft:aPosOff[1][2]+"px"},50);$("#dShirtpreviewNos").animate({paddingRight:aPosOff[1][3]+"px"},50)}if(a==2){gID("dShirtpreviewNos").style.marginTop="0px"}else{x=jsGetPos(gID("frontpreviewb"));y=jsGetPos(gID("frontpreviewc"));z=(x.h+y.h)/2;gID("js_offset").value=z;if($.browser.msie){z+=2}$("#dShirtpreviewNos").animate({marginTop:"-"+z+"px"},150)}};